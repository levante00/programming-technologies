# Task Testing Python

## Предыстория

У нас есть работающий проект, теперь мы хотим, чтобы он тестировался! Вашей целью является использовать готовый репозиторий, в котором необходимо реализовать тесты.

## Алгоритм действий
1. Клонируйте репозиторий: https://gitlab.akhcheck.ru/task-templates/testing-python.
2. Переключитесь на ветку task-testing-python.
3. Скопируйте папку task-testing-python к себе в проект под именем task-testing-python.
4. Создайте виртуальное окружение и добавьте его в `.gitignore` (если вы ставите создаете окружение внутри проекта).
5. Поставьте зависимости для проекта:
   - В проекте task-testing-python есть файл `requirements.txt`.
   - Ставим пакеты так: `pip install -r requirements.txt`.
6. Чтобы запустить файл `main`, необходимо выполнить команду: `PYTHONPATH=src python main.py`.
7. Чтобы выполнить запуск тестов, необходимо выполнить команду: `PYTHONPATH=src python -m pytest --cov src tests`.
8. Вы увидите, что первый пример покрыт тестами на 15-20%.
9. Необходимо сделать так, чтобы процент покрытия был 100% в первом случае, 100% во втором случае, 90% в третьем случае. Если это получится сделать, то задание сдано!

## Что тестируется

- В первом примере тестируется пример сложения чисел, а также определение, является ли год високосным или нет + количества дней в месяце.
- Во втором примере тестируется аналог консольной утилиты `tree` и удаление лишних директорий.
- В третьем примере тестируется adapter для сервисов погоды, который умеет возвращать текущее значение температуры и текстовое сообщение о разнице температур.

**Важно**. В третьей части задания необходимо получить ключ для доступа к сервису погоды https://developer.accuweather.com/. Ограничение на использование API (Application Programming Interface) - 50 запросов в сутки. По этой причине мы рекомендуем найти способ сохранения всего запроса, чтобы сгенерировать "заглушки".

## Требования по выполнению задания

- Во втором примере тестирующий код не должен создавать директории рядом с проектом: посмотрите, как создавать временные директории и временные файлы
-  В третьем примере тестирующий код не должен обращаться к сервису погоды, необходимо реализовать заглушку (заглушки), которая будет возвращать запрос.

## Процедура сдачи

1. В приватном репозитории (в котором делали задание 0) создайте ветку task-testing-python, в нем создайте папку task-testing-python.
2. Положите созданный и работающий проект в папку task-testing-python в ветке task-testing-python.
3. Создайте merge request из ветки task-testing-python в ветку main/master, добавьте ревьюера в merge request и не сливайте этот merge request!

## Полезная информация

- https://github.com/akhtyamovpavel/TestingRepo - примеры использования gtest
- https://github.com/google/googletest/blob/master/googlemock/README.md - google mock
- https://github.com/google/googletest/blob/master/googletest/docs/primer.md - google test
- https://docs.pytest.org/en/7.1.x/ - pytest
- https://requests-mock.readthedocs.io/en/latest/ - для заглушки веб-запросов в Python
- https://developer.accuweather.com/apis - прогноз погоды, API
- https://whoshuu.github.io/cpr/ - документация по отправке запросов
- https://github.com/nlohmann/json - документация по json
- https://site.mockito.org/ - Mockito (Для Java)